import{O as Z}from"./OrderPricesSection-BPJGfFwL.js";import{y as J,z as v,s as R,o,c as r,B as W,k as j,m as q,b as e,_ as b,F as L,n as T,G as Q,t as P,a as X,H as $,r as g,j as ee,d as w,p,w as G,A as M,q as te,I as ne,x as ae,h as B,e as N}from"./index-Ct8V6wF8.js";import{a as V,f as k}from"./format-B6-WTpBz.js";const se=["width","height","fill","transform"],oe={key:0},re=e("path",{d:"M148,200a20,20,0,1,1-20-20A20,20,0,0,1,148,200Zm-20-40a12,12,0,0,0,12-12V48a12,12,0,0,0-24,0V148A12,12,0,0,0,128,160Z"},null,-1),ie=[re],le={key:1},Ae=e("path",{d:"M216,40V216a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V40A16,16,0,0,1,56,24H200A16,16,0,0,1,216,40Z",opacity:"0.2"},null,-1),ce=e("path",{d:"M144,200a16,16,0,1,1-16-16A16,16,0,0,1,144,200Zm-16-40a8,8,0,0,0,8-8V48a8,8,0,0,0-16,0V152A8,8,0,0,0,128,160Z"},null,-1),de=[Ae,ce],ue={key:2},Pe=e("path",{d:"M200,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V40A16,16,0,0,0,200,24ZM128,160a12,12,0,1,1-12,12A12,12,0,0,1,128,160Zm-8-24V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Z"},null,-1),Ie=[Pe],Ee={key:3},me=e("path",{d:"M142,200a14,14,0,1,1-14-14A14,14,0,0,1,142,200Zm-14-42a6,6,0,0,0,6-6V48a6,6,0,0,0-12,0V152A6,6,0,0,0,128,158Z"},null,-1),Re=[me],De={key:4},pe=e("path",{d:"M144,200a16,16,0,1,1-16-16A16,16,0,0,1,144,200Zm-16-40a8,8,0,0,0,8-8V48a8,8,0,0,0-16,0V152A8,8,0,0,0,128,160Z"},null,-1),_e=[pe],ge={key:5},ye=e("path",{d:"M140,200a12,12,0,1,1-12-12A12,12,0,0,1,140,200Zm-12-44a4,4,0,0,0,4-4V48a4,4,0,0,0-8,0V152A4,4,0,0,0,128,156Z"},null,-1),Ce=[ye],we={name:"PhExclamationMark"},he=J({...we,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(a){const n=a,i=v("weight","regular"),A=v("size","1em"),y=v("color","currentColor"),E=v("mirrored",!1),l=R(()=>n.weight??i),c=R(()=>n.size??A),m=R(()=>n.color??y),I=R(()=>n.mirrored!==void 0?n.mirrored?"scale(-1, 1)":void 0:E?"scale(-1, 1)":void 0);return(_,h)=>(o(),r("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:c.value,height:c.value,fill:m.value,transform:I.value},_.$attrs),[W(_.$slots,"default"),l.value==="bold"?(o(),r("g",oe,ie)):l.value==="duotone"?(o(),r("g",le,de)):l.value==="fill"?(o(),r("g",ue,Ie)):l.value==="light"?(o(),r("g",Ee,Re)):l.value==="regular"?(o(),r("g",De,_e)):l.value==="thin"?(o(),r("g",ge,Ce)):j("",!0)],16,se))}});var S;let f=null;const U={jsSdkUrl:(S=void 0)!==null&&S!==void 0?S:"https://cdn.portone.io/v2/browser-sdk.js"};function ve(){return document.querySelector(`script[src="${U.jsSdkUrl}"]`)}function Oe(){const a=document.createElement("script");a.src=U.jsSdkUrl;const n=document.head||document.body;if(!n)throw new Error("[PortOne] Expected document.body not to be null");return n.appendChild(a)}function D(){return f??(f=new Promise((a,n)=>{if(window.PortOne)return a(window.PortOne);try{const i=ve()||Oe();i.addEventListener("load",()=>{if(window.PortOne)return a(window.PortOne);n(new Error("[PortOne] Failed to load window.PortOne"))}),i.addEventListener("error",()=>{n(new Error("[PortOne] Failed to load window.PortOne"))})}catch(i){return n(i)}}))}function Be(a){return D().then(n=>n.requestIdentityVerification(a))}function Se(a){return D().then(n=>n.requestIssueBillingKeyAndPay(a))}function fe(a){return D().then(n=>n.requestIssueBillingKey(a))}function Le(a){return D().then(n=>n.requestPayment(a))}function Ge(a,n){return D().then(i=>i.loadPaymentUI(a,n))}function Me(a,n){return D().then(i=>i.loadIssueBillingKeyUI(a,n))}function Ne(a){return D().then(n=>n.updateLoadPaymentUIRequest(a))}function Ve(a){return D().then(n=>n.updateLoadIssueBillingKeyUIRequest(a))}const ke={HTML5_INICIS:"PG_PROVIDER_HTML5_INICIS",PAYPAL:"PG_PROVIDER_PAYPAL",INICIS:"PG_PROVIDER_INICIS",DANAL:"PG_PROVIDER_DANAL",NICE:"PG_PROVIDER_NICE",DANAL_TPAY:"PG_PROVIDER_DANAL_TPAY",UPLUS:"PG_PROVIDER_UPLUS",NAVERPAY:"PG_PROVIDER_NAVERPAY",SETTLE:"PG_PROVIDER_SETTLE",KCP:"PG_PROVIDER_KCP",MOBILIANS:"PG_PROVIDER_MOBILIANS",KAKAOPAY:"PG_PROVIDER_KAKAOPAY",NAVERCO:"PG_PROVIDER_NAVERCO",KICC:"PG_PROVIDER_KICC",EXIMBAY:"PG_PROVIDER_EXIMBAY",SMILEPAY:"PG_PROVIDER_SMILEPAY",PAYCO:"PG_PROVIDER_PAYCO",KCP_BILLING:"PG_PROVIDER_KCP_BILLING",ALIPAY:"PG_PROVIDER_ALIPAY",CHAI:"PG_PROVIDER_CHAI",BLUEWALNUT:"PG_PROVIDER_BLUEWALNUT",SMARTRO:"PG_PROVIDER_SMARTRO",PAYMENTWALL:"PG_PROVIDER_PAYMENTWALL",TOSSPAYMENTS:"PG_PROVIDER_TOSSPAYMENTS",KCP_QUICK:"PG_PROVIDER_KCP_QUICK",DAOU:"PG_PROVIDER_DAOU",GALAXIA:"PG_PROVIDER_GALAXIA",TOSSPAY:"PG_PROVIDER_TOSSPAY",KCP_DIRECT:"PG_PROVIDER_KCP_DIRECT",SETTLE_ACC:"PG_PROVIDER_SETTLE_ACC",SETTLE_FIRM:"PG_PROVIDER_SETTLE_FIRM",INICIS_UNIFIED:"PG_PROVIDER_INICIS_UNIFIED",KSNET:"PG_PROVIDER_KSNET",PAYPAL_V2:"PG_PROVIDER_PAYPAL_V2",SMARTRO_V2:"PG_PROVIDER_SMARTRO_V2",NICE_V2:"PG_PROVIDER_NICE_V2",TOSS_BRANDPAY:"PG_PROVIDER_TOSS_BRANDPAY",WELCOME:"PG_PROVIDER_WELCOME",TOSSPAY_V2:"PG_PROVIDER_TOSSPAY_V2",INICIS_V2:"PG_PROVIDER_INICIS_V2",KPN:"PG_PROVIDER_KPN",KCP_V2:"PG_PROVIDER_KCP_V2",HYPHEN:"PG_PROVIDER_HYPHEN",EXIMBAY_V2:"PG_PROVIDER_EXIMBAY_V2"};Object.entries(ke).reduce((a,[n,i])=>Object.assign(Object.assign({},a),{[i]:n}),{});const be={requestIdentityVerification:Be,requestIssueBillingKeyAndPay:Se,requestIssueBillingKey:fe,requestPayment:Le,loadPaymentUI:Ge,loadIssueBillingKeyUI:Me,updateLoadPaymentUIRequest:Ne,updateLoadIssueBillingKeyUIRequest:Ve},Te="data:image/gif;base64,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",Qe="data:image/gif;base64,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",Ue={class:"order__payment"},ze={class:"payment__method"},Ye={class:"payment__method--list"},xe=["onClick"],Fe=["src","alt"],He={key:1},Ke={class:"payment__info"},Ze={class:"payment__info--price"},Je={__name:"OrderPaymentSection",props:{totalFinalPrice:Number,pgMethod:String},emits:["update:pgMethod"],setup(a,{emit:n}){const i=[{id:"kakao",name:"Kakao",icon:Qe},{id:"toss",name:"Toss",icon:Te}],A=n,y=E=>{A("update:pgMethod",E)};return(E,l)=>(o(),r("section",Ue,[l[1]||(l[1]=e("h3",null,"결제방법",-1)),e("div",ze,[e("div",Ye,[(o(),r(L,null,T(i,c=>e("div",{class:Q(["payment__method--list-item",{selected:a.pgMethod===c.id}]),key:c.id,onClick:m=>y(c.id)},[c.icon?(o(),r("img",{key:0,src:c.icon,alt:c.name},null,8,Fe)):(o(),r("span",He,P(c.name),1))],10,xe)),64))])]),e("div",Ke,[l[0]||(l[0]=e("div",{class:"payment__info--text"},"최종 결제금액",-1)),e("div",Ze,P(a.totalFinalPrice.toLocaleString())+"원",1)])]))}},We=b(Je,[["__scopeId","data-v-ee9f1206"]]),je={key:0,class:"loading"},qe={key:1,class:"empty-state"},Xe={key:2,class:"empty-state"},$e={key:3,class:"order"},et={class:"order__info"},tt={class:"table-responsive"},nt={class:"table order__info--table"},at=["src"],st={class:"product-info"},ot={class:"product-name"},rt={class:"d-md-none mobile-details"},it={class:"text-center align-middle d-none d-md-table-cell"},lt={class:"text-center align-middle d-none d-md-table-cell"},At={class:"text-center align-middle d-none d-md-table-cell"},ct={class:"text-center align-middle d-none d-md-table-cell"},dt={class:"payment__action"},ut={key:1,class:"order__status"},Pt={key:0},It={key:1},Et={key:2},mt={key:3},Rt={__name:"OrderDetailPage",setup(a){const n=ne(),i=ae(),A=X(),y=$(),E=n.params.id,l=g([]),c=g("kakao"),m=g({status:"PENDING"}),I=g("PENDING"),_=g(!0),h=g(!1),z=R(()=>l.value.reduce((d,t)=>d+t.originalPrice,0)),Y=R(()=>l.value.reduce((d,t)=>{const s=t.originalPrice*t.discountRatePercentage/100;return d+s},0)),C=R(()=>l.value.reduce((d,t)=>{const s=t.originalPrice-t.originalPrice*t.discountRatePercentage/100;return d+s},0)),x=R(()=>{switch(c.value){case"kakao":return"channel-key-bdb9666b-9eba-4cc3-bc3e-cca13a1ff2f9";case"toss":return"channel-key-4ab490c4-6acf-48d8-9439-c326b47656e3";case"kg":return"channel-key-0325f0f6-2588-4f62-993d-81e7ec9a6171";default:return"channel-key-bdb9666b-9eba-4cc3-bc3e-cca13a1ff2f9"}}),F=()=>[...crypto.getRandomValues(new Uint32Array(2))].map(d=>d.toString(16).padStart(8,"0")).join(""),H=async()=>{var d;if(!(!confirm("구매 하시겠습니까?")||C.value<=0))try{const t=F();if(!E){A.error("주문 정보가 올바르지 않습니다.");return}const s=await B.post("/api/v1/payments",{paymentId:t,orderId:E,paidPrice:C.value,paymentStatus:"PENDING"});if(!s.data){A.error("결제 생성에 실패했습니다. 다시 시도해주세요.");return}m.value={status:"PENDING"};const u=await be.requestPayment({storeId:"store-40493184-ea60-455e-93b1-94dc0b39f87f",channelKey:x.value,paymentId:s.data.paymentId,orderName:"ebookie 상품구매",totalAmount:C.value,currency:"KRW",payMethod:"EASY_PAY",productType:"PRODUCT_TYPE_DIGITAL",isCulturalExpense:!0,customer:{email:y.getMemberEmail},customData:{item:s.data.paymentId}});if(u.code!==void 0||!u.paymentId){m.value={status:"FAILED"},A.error(`결제에 실패했습니다: ${u.message||"알 수 없는 오류"}`);return}const O=await B.post("/api/v1/payments/complete",{paymentId:u.paymentId});if(!O.data.orderStatus)throw new Error("Server response missing orderStatus");switch(m.value.status=O.data.paymentStatus,I.value=O.data.orderStatus,m.value.status){case"PAID":A.success("결제가 완료되었습니다!"),i.push("/library");break;case"FAILED":A.error("결제 처리 중 오류가 발생했습니다.");break;case"CANCELLED":A.info("결제가 취소되었습니다.");break;default:A.warning("알 수 없는 결제 상태입니다.")}}catch(t){console.error("Payment creation error:",t),m.value={status:"FAILED"},((d=t.response)==null?void 0:d.status)===409?A.error("이미 처리 중인 결제가 있습니다. 잠시 후 다시 시도해주세요."):A.error("결제 처리 중 오류가 발생했습니다. 다시 시도해주세요.");return}},K=async d=>{var t,s;try{_.value=!0,h.value=!1;const u=await B.get(`/api/v1/orders/${d}`);if(!u.data)throw new Error("주문을 찾을 수 없습니다.");if(!u.data.orderStatus)throw new Error("Server response missing orderStatus");l.value=u.data.orderDetailDtos,I.value=u.data.orderStatus}catch(u){console.error("Order detail fetch error:",u),h.value=!0,((t=u.response)==null?void 0:t.status)===403?(A.error("접근 권한이 없는 주문입니다."),i.push("/orders")):((s=u.response)==null?void 0:s.status)===404?(A.error("존재하지 않는 주문입니다."),i.push("/orders")):A.error("주문 정보 로드에 실패했습니다!")}finally{_.value=!1}};return ee(()=>{K(E)}),(d,t)=>_.value?(o(),r("div",je,t[2]||(t[2]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):h.value?(o(),r("div",qe,[w(p(he),{size:40,weight:"fill",color:"var(--muted-color)"}),t[3]||(t[3]=e("h3",{class:"mt-4"},"주문 정보를 불러올 수 없습니다",-1)),t[4]||(t[4]=e("p",{class:"text-muted"},"잠시 후 다시 시도해주세요.",-1))])):l.value.length?(o(),r("div",$e,[e("section",et,[t[12]||(t[12]=e("h3",null,"주문/결제",-1)),e("div",tt,[e("table",nt,[t[10]||(t[10]=e("colgroup",{class:"d-none d-md-table-column-group"},[e("col",{width:"10%"}),e("col",{width:"45%"}),e("col",{width:"10%"}),e("col",{width:"5%"}),e("col",{width:"10%"}),e("col",{width:"10%"}),e("col",{width:"10%"})],-1)),t[11]||(t[11]=e("thead",{class:"text-center"},[e("tr",null,[e("th",{colspan:"2"},"상품명"),e("th",{class:"d-none d-md-table-cell"},"정가"),e("th",{class:"d-none d-md-table-cell"},"수량"),e("th",{class:"d-none d-md-table-cell"},"할인금액"),e("th",{class:"d-none d-md-table-cell"},"합계"),e("th",{class:"d-none d-md-table-cell"},"배송일")])],-1)),e("tbody",null,[(o(!0),r(L,null,T(l.value,s=>(o(),r("tr",null,[e("td",null,[e("img",{src:p(te)(s.thumbnail),alt:"상품 이미지",class:"product-image"},null,8,at)]),e("td",null,[e("div",st,[e("span",ot,P(s.name),1),e("div",rt,[e("div",null,"정가: "+P(s.originalPrice.toLocaleString())+"원",1),e("div",null,"수량: "+P(s.quantity),1),e("div",null,"할인: "+P(p(V)(s.originalPrice,s.discountRatePercentage))+"원",1),e("div",null,"합계: "+P(p(k)(s.originalPrice,s.discountRatePercentage))+"원",1),t[8]||(t[8]=e("div",null,"배송: 무배송 (결제 후 다운로드)",-1))])])]),e("td",it,P(s.originalPrice.toLocaleString())+"원 ",1),e("td",lt,P(s.quantity),1),e("td",At,P(p(V)(s.originalPrice,s.discountRatePercentage))+"원 ",1),e("td",ct,P(p(k)(s.originalPrice,s.discountRatePercentage))+"원 ",1),t[9]||(t[9]=e("td",{class:"text-center align-middle d-none d-md-table-cell"}," 무배송 (결제 후 다운로드) ",-1))]))),256))])])])]),w(Z,{"total-original-price":z.value,"total-discount-amount":Y.value,"total-final-price":C.value},null,8,["total-original-price","total-discount-amount","total-final-price"]),I.value==="PENDING"?(o(),r(L,{key:0},[w(We,{"total-final-price":C.value,"pg-method":c.value,"onUpdate:pgMethod":t[1]||(t[1]=s=>c.value=s)},null,8,["total-final-price","pg-method"]),e("div",dt,[w(M,{class:"w-100 payment__action--button",onAction:H},{default:G(()=>t[13]||(t[13]=[N("결제하기")])),_:1})])],64)):(o(),r("section",ut,[t[14]||(t[14]=e("h3",null,"주문 상태",-1)),e("div",{class:Q(["status-message",I.value.toLowerCase()])},[I.value==="PAID"?(o(),r("p",Pt,"결제가 완료된 주문입니다.")):I.value==="CANCELLED"?(o(),r("p",It,"취소된 주문입니다.")):I.value==="REFUNDED"?(o(),r("p",Et,"환불된 주문입니다.")):(o(),r("p",mt,"알 수 없는 주문 상태입니다."))],2)]))])):(o(),r("div",Xe,[t[6]||(t[6]=e("h3",{class:"mt-4"},"주문 내역이 없습니다",-1)),t[7]||(t[7]=e("p",{class:"text-muted"},"주문하신 상품이 없습니다.",-1)),w(M,{class:"mt-3",onAction:t[0]||(t[0]=s=>p(i).push("/products"))},{default:G(()=>t[5]||(t[5]=[N("상품 보러가기")])),_:1})]))}},gt=b(Rt,[["__scopeId","data-v-b17a860f"]]);export{gt as default};
