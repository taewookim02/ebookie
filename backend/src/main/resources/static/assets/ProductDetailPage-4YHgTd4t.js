import{i as j,j as y,k as _,o,c,l as F,m as Z,n as O,a as e,_ as k,F as x,y as I,t as p,D as S,q as d,E as W,A as N,H as u,d as z,b as i,w as L,p as J,P as Q,u as X,B as ee,G as te,I as C,r as P,v as se,J as oe,e as ae,s as le,K as ie,C as re,z as ne,g as H,L as ce}from"./index-BQLI52zX.js";import{D as de}from"./DeliveryAndRefundSection-CGa-eY-y.js";import{A as B}from"./ActionButton-Djd-R_q9.js";import{b as E}from"./format-D8BanFEv.js";const ue=["width","height","fill","transform"],ve={key:0},he=e("path",{d:"M184,28H72A20,20,0,0,0,52,48V224a12,12,0,0,0,18.36,10.18l57.63-36,57.65,36A12,12,0,0,0,204,224V48A20,20,0,0,0,184,28Zm-4,174.35-45.65-28.53a12,12,0,0,0-12.72,0L76,202.35V52H180Z"},null,-1),ge=[he],me={key:1},pe=e("path",{d:"M192,48V224l-64-40L64,224V48a8,8,0,0,1,8-8H184A8,8,0,0,1,192,48Z",opacity:"0.2"},null,-1),_e=e("path",{d:"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32Zm0,177.57-51.77-32.35a8,8,0,0,0-8.48,0L72,209.57V48H184Z"},null,-1),we=[pe,_e],fe={key:2},$e=e("path",{d:"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32Z"},null,-1),be=[$e],ye={key:3},ke=e("path",{d:"M184,34H72A14,14,0,0,0,58,48V224a6,6,0,0,0,9.18,5.09l60.81-38,60.83,38A6,6,0,0,0,198,224V48A14,14,0,0,0,184,34Zm2,179.17-54.83-34.26a6,6,0,0,0-6.36,0L70,213.17V48a2,2,0,0,1,2-2H184a2,2,0,0,1,2,2Z"},null,-1),Ae=[ke],De={key:4},Se=e("path",{d:"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32Zm0,177.57-51.77-32.35a8,8,0,0,0-8.48,0L72,209.57V48H184Z"},null,-1),ze=[Se],Ve={key:5},Ce=e("path",{d:"M184,36H72A12,12,0,0,0,60,48V224a4,4,0,0,0,6.12,3.39L128,188.72l61.89,38.67A4,4,0,0,0,192,228a4.06,4.06,0,0,0,1.94-.5A4,4,0,0,0,196,224V48A12,12,0,0,0,184,36Zm4,180.78-57.89-36.17a4,4,0,0,0-4.24,0L68,216.78V48a4,4,0,0,1,4-4H184a4,4,0,0,1,4,4Z"},null,-1),He=[Ce],Ze={name:"PhBookmarkSimple"},q=j({...Ze,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(t){const a=t,s=y("weight","regular"),r=y("size","1em"),l=y("color","currentColor"),h=y("mirrored",!1),n=_(()=>a.weight??s),v=_(()=>a.size??r),w=_(()=>a.color??l),f=_(()=>a.mirrored!==void 0?a.mirrored?"scale(-1, 1)":void 0:h?"scale(-1, 1)":void 0);return($,V)=>(o(),c("svg",O({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:v.value,height:v.value,fill:w.value,transform:f.value},$.$attrs),[F($.$slots,"default"),n.value==="bold"?(o(),c("g",ve,ge)):n.value==="duotone"?(o(),c("g",me,we)):n.value==="fill"?(o(),c("g",fe,be)):n.value==="light"?(o(),c("g",ye,Ae)):n.value==="regular"?(o(),c("g",De,ze)):n.value==="thin"?(o(),c("g",Ve,He)):Z("",!0)],16,ue))}}),xe=["width","height","fill","transform"],Me={key:0},Le=e("path",{d:"M178,36c-20.09,0-37.92,7.93-50,21.56C115.92,43.93,98.09,36,78,36a66.08,66.08,0,0,0-66,66c0,72.34,105.81,130.14,110.31,132.57a12,12,0,0,0,11.38,0C138.19,232.14,244,174.34,244,102A66.08,66.08,0,0,0,178,36Zm-5.49,142.36A328.69,328.69,0,0,1,128,210.16a328.69,328.69,0,0,1-44.51-31.8C61.82,159.77,36,131.42,36,102A42,42,0,0,1,78,60c17.8,0,32.7,9.4,38.89,24.54a12,12,0,0,0,22.22,0C145.3,69.4,160.2,60,178,60a42,42,0,0,1,42,42C220,131.42,194.18,159.77,172.51,178.36Z"},null,-1),Be=[Le],Ie={key:1},Re=e("path",{d:"M232,102c0,66-104,122-104,122S24,168,24,102A54,54,0,0,1,78,48c22.59,0,41.94,12.31,50,32,8.06-19.69,27.41-32,50-32A54,54,0,0,1,232,102Z",opacity:"0.2"},null,-1),Ne=e("path",{d:"M178,40c-20.65,0-38.73,8.88-50,23.89C116.73,48.88,98.65,40,78,40a62.07,62.07,0,0,0-62,62c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,228.66,240,172,240,102A62.07,62.07,0,0,0,178,40ZM128,214.8C109.74,204.16,32,155.69,32,102A46.06,46.06,0,0,1,78,56c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,155.61,146.24,204.15,128,214.8Z"},null,-1),Pe=[Re,Ne],Ee={key:2},je=e("path",{d:"M240,102c0,70-103.79,126.66-108.21,129a8,8,0,0,1-7.58,0C119.79,228.66,16,172,16,102A62.07,62.07,0,0,1,78,40c20.65,0,38.73,8.88,50,23.89C139.27,48.88,157.35,40,178,40A62.07,62.07,0,0,1,240,102Z"},null,-1),Fe=[je],Oe={key:3},Te=e("path",{d:"M178,42c-21,0-39.26,9.47-50,25.34C117.26,51.47,99,42,78,42a60.07,60.07,0,0,0-60,60c0,29.2,18.2,59.59,54.1,90.31a334.68,334.68,0,0,0,53.06,37,6,6,0,0,0,5.68,0,334.68,334.68,0,0,0,53.06-37C219.8,161.59,238,131.2,238,102A60.07,60.07,0,0,0,178,42ZM128,217.11C111.59,207.64,30,157.72,30,102A48.05,48.05,0,0,1,78,54c20.28,0,37.31,10.83,44.45,28.27a6,6,0,0,0,11.1,0C140.69,64.83,157.72,54,178,54a48.05,48.05,0,0,1,48,48C226,157.72,144.41,207.64,128,217.11Z"},null,-1),qe=[Te],Ue={key:4},Ye=e("path",{d:"M178,40c-20.65,0-38.73,8.88-50,23.89C116.73,48.88,98.65,40,78,40a62.07,62.07,0,0,0-62,62c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,228.66,240,172,240,102A62.07,62.07,0,0,0,178,40ZM128,214.8C109.74,204.16,32,155.69,32,102A46.06,46.06,0,0,1,78,56c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,155.61,146.24,204.15,128,214.8Z"},null,-1),Ge=[Ye],Ke={key:5},We=e("path",{d:"M178,44c-21.44,0-39.92,10.19-50,27.07C117.92,54.19,99.44,44,78,44a58.07,58.07,0,0,0-58,58c0,28.59,18,58.47,53.4,88.79a333.81,333.81,0,0,0,52.7,36.73,4,4,0,0,0,3.8,0,333.81,333.81,0,0,0,52.7-36.73C218,160.47,236,130.59,236,102A58.07,58.07,0,0,0,178,44ZM128,219.42c-14-8-100-59.35-100-117.42A50.06,50.06,0,0,1,78,52c21.11,0,38.85,11.31,46.3,29.51a4,4,0,0,0,7.4,0C139.15,63.31,156.89,52,178,52a50.06,50.06,0,0,1,50,50C228,160,142,211.46,128,219.42Z"},null,-1),Je=[We],Qe={name:"PhHeart"},U=j({...Qe,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(t){const a=t,s=y("weight","regular"),r=y("size","1em"),l=y("color","currentColor"),h=y("mirrored",!1),n=_(()=>a.weight??s),v=_(()=>a.size??r),w=_(()=>a.color??l),f=_(()=>a.mirrored!==void 0?a.mirrored?"scale(-1, 1)":void 0:h?"scale(-1, 1)":void 0);return($,V)=>(o(),c("svg",O({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:v.value,height:v.value,fill:w.value,transform:f.value},$.$attrs),[F($.$slots,"default"),n.value==="bold"?(o(),c("g",Me,Be)):n.value==="duotone"?(o(),c("g",Ie,Pe)):n.value==="fill"?(o(),c("g",Ee,Fe)):n.value==="light"?(o(),c("g",Oe,qe)):n.value==="regular"?(o(),c("g",Ue,Ge)):n.value==="thin"?(o(),c("g",Ke,Je)):Z("",!0)],16,xe))}}),Xe=["width","height","fill","transform"],et={key:0},tt=e("path",{d:"M216,36H40A20,20,0,0,0,20,56V200a20,20,0,0,0,20,20H216a20,20,0,0,0,20-20V56A20,20,0,0,0,216,36Zm-4,24V76H44V60ZM44,196V100H212v96Zm136-72a52,52,0,0,1-104,0,12,12,0,0,1,24,0,28,28,0,0,0,56,0,12,12,0,0,1,24,0Z"},null,-1),st=[tt],ot={key:1},at=e("path",{d:"M224,56V80H32V56a8,8,0,0,1,8-8H216A8,8,0,0,1,224,56Z",opacity:"0.2"},null,-1),lt=e("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V72H40V56Zm0,144H40V88H216V200Zm-40-88a48,48,0,0,1-96,0,8,8,0,0,1,16,0,32,32,0,0,0,64,0,8,8,0,0,1,16,0Z"},null,-1),it=[at,lt],rt={key:2},nt=e("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM128,160a48.05,48.05,0,0,1-48-48,8,8,0,0,1,16,0,32,32,0,0,0,64,0,8,8,0,0,1,16,0A48.05,48.05,0,0,1,128,160ZM40,72V56H216V72Z"},null,-1),ct=[nt],dt={key:3},ut=e("path",{d:"M216,42H40A14,14,0,0,0,26,56V200a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A14,14,0,0,0,216,42ZM40,54H216a2,2,0,0,1,2,2V74H38V56A2,2,0,0,1,40,54ZM216,202H40a2,2,0,0,1-2-2V86H218V200A2,2,0,0,1,216,202Zm-42-90a46,46,0,0,1-92,0,6,6,0,0,1,12,0,34,34,0,0,0,68,0,6,6,0,0,1,12,0Z"},null,-1),vt=[ut],ht={key:4},gt=e("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V72H40V56Zm0,144H40V88H216V200Zm-40-88a48,48,0,0,1-96,0,8,8,0,0,1,16,0,32,32,0,0,0,64,0,8,8,0,0,1,16,0Z"},null,-1),mt=[gt],pt={key:5},_t=e("path",{d:"M216,44H40A12,12,0,0,0,28,56V200a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A12,12,0,0,0,216,44ZM40,52H216a4,4,0,0,1,4,4V76H36V56A4,4,0,0,1,40,52ZM216,204H40a4,4,0,0,1-4-4V84H220V200A4,4,0,0,1,216,204Zm-44-92a44,44,0,0,1-88,0,4,4,0,0,1,8,0,36,36,0,0,0,72,0,4,4,0,0,1,8,0Z"},null,-1),wt=[_t],ft={name:"PhShoppingBagOpen"},Y=j({...ft,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(t){const a=t,s=y("weight","regular"),r=y("size","1em"),l=y("color","currentColor"),h=y("mirrored",!1),n=_(()=>a.weight??s),v=_(()=>a.size??r),w=_(()=>a.color??l),f=_(()=>a.mirrored!==void 0?a.mirrored?"scale(-1, 1)":void 0:h?"scale(-1, 1)":void 0);return($,V)=>(o(),c("svg",O({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:v.value,height:v.value,fill:w.value,transform:f.value},$.$attrs),[F($.$slots,"default"),n.value==="bold"?(o(),c("g",et,st)):n.value==="duotone"?(o(),c("g",ot,it)):n.value==="fill"?(o(),c("g",rt,ct)):n.value==="light"?(o(),c("g",dt,vt)):n.value==="regular"?(o(),c("g",ht,mt)):n.value==="thin"?(o(),c("g",pt,wt)):Z("",!0)],16,Xe))}}),$t={class:"author-details"},bt={class:"author-details-container"},yt={class:"author-container"},kt={class:"author-header"},At={class:"author-header__name"},Dt={class:"author-body"},St={__name:"AuthorDetailsSection",props:{detailDto:Object},setup(t){return(a,s)=>(o(),c("section",$t,[s[0]||(s[0]=e("h3",null,"저자 소개",-1)),(o(!0),c(x,null,I(t.detailDto.authors,r=>(o(),c("div",bt,[e("div",yt,[e("div",kt,[e("span",At,p(r.name)+" 저",1)]),e("div",Dt,[e("p",null,p(r.description),1)])])]))),256))]))}},zt=k(St,[["__scopeId","data-v-0dc8e978"]]),Vt={class:"details"},Ct={class:"details-container"},Ht={class:"details-category"},Zt={class:"details-info"},xt={__name:"BookDetailsSection",props:{detailDto:Object},setup(t){return(a,s)=>(o(),c("section",Vt,[s[3]||(s[3]=e("h3",null,"작품소개",-1)),e("div",Ct,[e("div",Ht,[s[0]||(s[0]=e("h4",{class:"details-category__heading"},"이 상품이 속한 분야",-1)),e("span",null,"eBook > IT > "+p(t.detailDto.categoryName),1)]),e("div",Zt,[s[1]||(s[1]=e("p",null," 파일은 결제내역 > 결제상세 > 다운로드 버튼을 눌러 다운로드 받으실 수 있습니다. (단, 로그인 및 결제 후 다운로드 이용 가능) ",-1)),s[2]||(s[2]=e("br",null,null,-1)),e("p",null,p(t.detailDto.description),1)])])]))}},Mt=k(xt,[["__scopeId","data-v-7975213e"]]),Lt={__name:"CartButton",props:{size:{type:Number,default:32},color:{type:String,default:"#333333"},weight:{type:String,default:"light"},isActive:Boolean},emits:["cart"],setup(t,{emit:a}){const s=a,r=()=>{s("cart")};return(l,h)=>(o(),c("button",{class:"btn-cart",onClick:r},[t.isActive?(o(),S(d(Y),{key:1,size:t.size,color:"#333333",weight:"fill"},null,8,["size"])):(o(),S(d(Y),{key:0,size:t.size,color:t.color,weight:t.weight},null,8,["size","color","weight"]))]))}},Bt=k(Lt,[["__scopeId","data-v-6ab20118"]]),It={__name:"LikeButton",props:{size:{type:Number,default:32},color:{type:String,default:"#333333"},weight:{type:String,default:"light"},isActive:Boolean},emits:["like"],setup(t,{emit:a}){const s=a,r=()=>{s("like")};return(l,h)=>(o(),c("button",{class:"btn-like",onClick:r},[t.isActive?(o(),S(d(U),{key:1,size:t.size,color:"#FE4D4D",weight:"fill"},null,8,["size"])):(o(),S(d(U),{key:0,size:t.size,color:t.color,weight:t.weight},null,8,["size","color","weight"]))]))}},Rt=k(It,[["__scopeId","data-v-fd84eafd"]]),Nt={__name:"SaveButton",props:{size:{type:Number,default:32},color:{type:String,default:"#333333"},weight:{type:String,default:"light"},isActive:Boolean},emits:["save"],setup(t,{emit:a}){const s=a,r=()=>{s("save")};return(l,h)=>(o(),c("button",{class:"btn-save",onClick:r},[t.isActive?(o(),S(d(q),{key:1,size:t.size,color:"#333333",weight:"fill"},null,8,["size"])):(o(),S(d(q),{key:0,size:t.size,color:t.color,weight:t.weight},null,8,["size","color","weight"]))]))}},Pt=k(Nt,[["__scopeId","data-v-c316eba0"]]),Et={class:"hero"},jt=["src"],Ft={class:"hero__info"},Ot={class:"info-header"},Tt={class:"info-header__title"},qt={class:"info-header__audit text-muted"},Ut={class:"info-header__review"},Yt={class:"info-header__review--icons"},Gt={class:"info-header__review--avg"},Kt={class:"info-bottom pt-4"},Wt={class:"info-bottom__price"},Jt={class:"price text-muted price-original"},Qt={class:"price"},Xt={key:0,class:"badge text-bg-danger"},es={class:"info-bottom__action"},ts="http://localhost:8080",ss={__name:"HeroSection",props:{detailDto:Object},emits:["scrollToReview","save","like","cart","buy"],setup(t,{emit:a}){const s=t,r=a,l=()=>{r("scrollToReview")},h=()=>r("save"),n=()=>r("like"),v=()=>r("cart"),w=()=>r("buy"),f=_(()=>s.detailDto&&s.detailDto.images&&s.detailDto.images.length>0?`${ts}/api/v1/image?name=${s.detailDto.images[0].fileName}`:""),$=_(()=>{var m;const b=[];return(m=s.detailDto.authors)==null||m.forEach(D=>{b.push(D.name)}),b.join(", ")}),V=_(()=>{var b;if((b=s.detailDto)!=null&&b.publishedDate){const m=new Date(s.detailDto.publishedDate);return new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"long",day:"numeric"}).format(m)}return""}),g=_(()=>{var m,D;let b=0;return(m=s.detailDto.reviews)==null||m.forEach(M=>{b+=M.rating}),b?(b/((D=s.detailDto.reviews)==null?void 0:D.length)).toFixed(1):0}),A=_(()=>(s.detailDto.price-s.detailDto.price*s.detailDto.discountRate/100).toLocaleString()),R=_(()=>{const b=parseFloat(g.value),m=[];for(let D=1;D<=5;D++)m.push(D<=b);return m});return(b,m)=>{var D,M;return o(),c("section",Et,[e("div",{class:N(["hero__image",{loading:!f.value}])},[f.value?(o(),c("img",{key:0,src:f.value,alt:"도서 썸네일"},null,8,jt)):(o(),S(d(W),{key:1,size:"64",color:"#ccc",margin:"auto"}))],2),e("div",Ft,[e("div",Ot,[e("h1",Tt,p(t.detailDto.name),1),e("div",qt,[e("span",null,p($.value)+" 저",1),m[0]||(m[0]=e("span",{class:"spacer"},"|",-1)),e("span",null,p(t.detailDto.publisherName),1),m[1]||(m[1]=e("span",{class:"spacer"},"|",-1)),e("span",null,p(V.value),1)]),e("div",Ut,[e("div",Yt,[(o(!0),c(x,null,I(R.value,(T,K)=>(o(),S(d(u),{key:K,size:16,color:T?"blue":"#ccc",weight:"fill",class:N({"empty-star":!T})},null,8,["color","class"]))),128))]),e("span",Gt,p(g.value),1),m[2]||(m[2]=e("span",{class:"spacer text-muted"},"|",-1)),e("span",null,[e("a",{to:"#",class:"link-dark",onClick:l},"회원리뷰("+p((D=t.detailDto.reviews)==null?void 0:D.length)+"건)",1)])])]),e("div",Kt,[e("div",Wt,[e("span",null,[m[3]||(m[3]=z("정가 ")),e("span",Jt,p((M=t.detailDto.price)==null?void 0:M.toLocaleString())+"원",1)]),e("span",null,[m[4]||(m[4]=z("판매가 ")),e("strong",Qt,p(A.value)+"원",1),m[5]||(m[5]=z()),t.detailDto.discountRate?(o(),c("span",Xt,p(t.detailDto.discountRate)+"%",1)):Z("",!0)])]),e("div",es,[i(Rt,{onLike:n,"is-active":t.detailDto.isLiked},null,8,["is-active"]),i(Pt,{onSave:h,"is-active":t.detailDto.isSaved},null,8,["is-active"]),i(Bt,{onCart:v,"is-active":t.detailDto.isInCart},null,8,["is-active"]),i(B,{onAction:w,"is-active":!0},{default:L(()=>m[6]||(m[6]=[z("구매하기")])),_:1})])])])])}}},os=k(ss,[["__scopeId","data-v-da5c1ffa"]]),as={class:"product-details"},ls={class:"product-details__table table table-borderless"},is={__name:"ProductDetailsSection",props:{detailDto:Object},setup(t){const a=t;return _(()=>E(a.detailDto.publishedDate)),J(()=>{}),(s,r)=>(o(),c("section",as,[r[5]||(r[5]=e("h3",null,"품목정보",-1)),e("table",ls,[r[4]||(r[4]=e("colgroup",null,[e("col",{width:"20%"}),e("col",{width:"80%"})],-1)),e("tbody",null,[e("tr",null,[r[0]||(r[0]=e("th",null,"발행일",-1)),e("td",null,p(d(E)(a.detailDto.publishedDate)),1)]),r[1]||(r[1]=e("tr",null,[e("th",null,"이용안내"),e("td",null,[e("ul",null,[e("li",null,"배송 필요없음"),e("li",null,"결제 후 다운로드 가능"),e("li",null,"이용기간 제한없음")])])],-1)),r[2]||(r[2]=e("tr",null,[e("th",null,"파일포맷"),e("td",null,"PDF")],-1)),r[3]||(r[3]=e("tr",null,[e("th",null,"용량"),e("td",null,"11.83 MB")],-1))])])]))}},rs=k(is,[["__scopeId","data-v-485b0c97"]]),ns={class:"related"},cs={__name:"RelatedProductsSection",props:{productId:String,detailDto:Object},setup(t){const a=t;return(s,r)=>(o(),c("section",ns,[i(Q,{products:a.detailDto.relatedProducts,sliderTitle:"관련 eBook 추천"},null,8,["products"])]))}},G=k(cs,[["__scopeId","data-v-b12a23b0"]]),ds={class:"review-body"},us={class:"review-header"},vs={class:"review-header__writer"},hs={key:0,class:"review-header__controls"},gs={class:"review-stars"},ms={class:"review-info"},ps={class:"text-muted review-info__date"},_s={class:"review-content"},ws={__name:"ReviewBody",props:{review:Object},setup(t){const a=t;X();const s=ee(),r=()=>{console.log("handleEdit")},l=()=>{console.log("handleDelete")},h=_(()=>s.getMemberEmail===a.review.writerEmail);return(n,v)=>(o(),c("div",ds,[e("div",us,[e("strong",vs,p(t.review.writerEmail),1),h.value?(o(),c("div",hs,[i(B,{onAction:r},{default:L(()=>v[0]||(v[0]=[z("삭제")])),_:1}),i(B,{onAction:l},{default:L(()=>v[1]||(v[1]=[z("수정")])),_:1})])):Z("",!0)]),e("div",gs,[i(d(u),{size:16,color:"blue",weight:"fill"}),i(d(u),{size:16,color:"blue",weight:"fill"}),i(d(u),{size:16,color:"blue",weight:"fill"}),i(d(u),{size:16,color:"blue",weight:"fill"}),i(d(u),{size:16,color:"blue",weight:"regular"})]),e("div",ms,[e("small",ps,p(d(E)(t.review.createdAt))+" 작성됨",1)]),e("div",_s,p(t.review.content),1)]))}},fs=k(ws,[["__scopeId","data-v-8cf88688"]]),$s={class:"review-container"},bs={class:"review-container__stars"},ys={class:"stars-heading"},ks={class:"stars-main"},As={class:"stars-main__icons"},Ds={class:"stars-main__numbers"},Ss={class:"rating-avg"},zs={class:"review-container__percentage"},Vs={class:"percetage-stars__row"},Cs=["aria-valuenow"],Hs={class:"percetage-stars__row"},Zs=["aria-valuenow"],xs={class:"percetage-stars__row"},Ms=["aria-valuenow"],Ls={class:"percetage-stars__row"},Bs=["aria-valuenow"],Is={class:"percetage-stars__row"},Rs=["aria-valuenow"],Ns={__name:"ReviewStats",props:{detailDto:Object},setup(t){const a=t;te(()=>{});const s=_(()=>{var n;return(n=a.detailDto.reviews)!=null&&n.length?(a.detailDto.reviews.reduce((v,w)=>v+w.rating,0)/a.detailDto.reviews.length).toFixed(1):0}),r=_(()=>{const h=parseFloat(s.value),n=[];for(let v=1;v<=5;v++)n.push(v<=h);return n}),l=_(()=>{var v;if(!((v=a.detailDto.reviews)!=null&&v.length))return[0,0,0,0,0];const h=[0,0,0,0,0],n=a.detailDto.reviews.length;return a.detailDto.reviews.forEach(w=>{const f=Math.floor(w.rating)-1;h[f]++}),h.map(w=>(w/n*100).toFixed(0))});return(h,n)=>{var v;return o(),c("div",$s,[e("div",bs,[e("span",ys,p((v=t.detailDto.reviews)==null?void 0:v.length)+"명의 eBookie회원이 평가한 평균별점",1),e("div",ks,[e("div",As,[(o(!0),c(x,null,I(r.value,(w,f)=>(o(),S(d(u),{key:f,size:32,color:w?"blue":"#ccc",weight:"fill",class:N({"empty-star":!w})},null,8,["color","class"]))),128))]),e("div",Ds,[e("span",Ss,p(s.value),1),n[0]||(n[0]=e("span",{class:"rating-total text-muted"}," / 5.0",-1))])])]),e("div",zs,[e("div",Vs,[i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"})]),e("div",{class:"progress",role:"progressbar","aria-valuenow":l.value[4],"aria-valuemin":"0","aria-valuemax":"100"},[e("div",{class:"progress-bar",style:C(`width: ${l.value[4]}%`)},p(l.value[4])+"%",5)],8,Cs),e("div",Hs,[i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,color:"blue"})]),e("div",{class:"progress",role:"progressbar","aria-valuenow":l.value[3],"aria-valuemin":"0","aria-valuemax":"100"},[e("div",{class:"progress-bar",style:C(`width: ${l.value[3]}%`)},p(l.value[3])+"%",5)],8,Zs),e("div",xs,[i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,color:"blue"}),i(d(u),{size:16,color:"blue"})]),e("div",{class:"progress",role:"progressbar","aria-valuenow":l.value[2],"aria-valuemin":"0","aria-valuemax":"100"},[e("div",{class:"progress-bar",style:C(`width: ${l.value[2]}%`)},p(l.value[2])+"%",5)],8,Ms),e("div",Ls,[i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,color:"blue"}),i(d(u),{size:16,color:"blue"}),i(d(u),{size:16,color:"blue"})]),e("div",{class:"progress",role:"progressbar","aria-valuenow":l.value[1],"aria-valuemin":"0","aria-valuemax":"100"},[e("div",{class:"progress-bar",style:C(`width: ${l.value[1]}%`)},p(l.value[1])+"%",5)],8,Bs),e("div",Is,[i(d(u),{size:16,weight:"fill",color:"blue"}),i(d(u),{size:16,color:"blue"}),i(d(u),{size:16,color:"blue"}),i(d(u),{size:16,color:"blue"}),i(d(u),{size:16,color:"blue"})]),e("div",{class:"progress",role:"progressbar","aria-valuenow":l.value[0],"aria-valuemin":"0","aria-valuemax":"100"},[e("div",{class:"progress-bar",style:C(`width: ${l.value[0]}%`)},p(l.value[0])+"%",5)],8,Rs)])])}}},Ps=k(Ns,[["__scopeId","data-v-43ed2acd"]]),Es={class:"review-form__container"},js={class:"text-muted char-count"},Fs={__name:"ReviewForm",setup(t){const a=P(""),s=_({get:()=>a.value,set:h=>{a.value=h.substring(0,50)}}),r=_(()=>`${a.value.length} / 50`),l=()=>{console.log("handleSave",s.value)};return(h,n)=>(o(),c("form",{class:"review-form",onSubmit:ae(l,["prevent"])},[n[2]||(n[2]=e("h3",null,"리뷰 작성",-1)),e("div",Es,[se(e("textarea",{"onUpdate:modelValue":n[0]||(n[0]=v=>s.value=v),name:"content",id:"review-content",class:"review-content form-control w-100",rows:"3",maxlength:"50"},null,512),[[oe,s.value]]),i(B,{class:"btn-action",type:"submit"},{default:L(()=>n[1]||(n[1]=[z("등록")])),_:1}),e("small",js,p(r.value),1)])],32))}},Os=k(Fs,[["__scopeId","data-v-6786782c"]]),Ts={class:"review"},qs={__name:"ReviewSection",props:{detailDto:Object},setup(t){return(a,s)=>(o(),c("section",Ts,[s[0]||(s[0]=e("div",{class:"review-header"},[e("h3",null,"회원리뷰")],-1)),i(Ps,{"detail-dto":t.detailDto},null,8,["detail-dto"]),i(Os),(o(!0),c(x,null,I(t.detailDto.reviews,r=>(o(),S(fs,{review:r},null,8,["review"]))),256))]))}},Us=k(qs,[["__scopeId","data-v-7fcd4122"]]),Js={__name:"ProductDetailPage",setup(t){const a=re(),s=ne(),r=P(null),l=P({}),h=le(),n=()=>{r.value.$el.scrollIntoView({behavior:"smooth"})},v=async g=>{try{const A=await H.get(`/api/v1/products/${g}`);l.value=A.data}catch(A){console.log("err:",A)}};ie(()=>a.params.id,g=>{g&&v(g)},{immediate:!0});const w=async()=>{try{const g=a.params.id;await H.post(`/api/v1/saved/${g}`),l.value.isSaved=!l.value.isSaved,l.value.isSaved?h.success("찜 목록에 저장 완료!"):h.info("찜 목록에서 삭제 완료!")}catch(g){console.log("handleSave() err:",g),g.status===401&&s.push("/login")}},f=async()=>{try{const g=a.params.id;await H.post(`/api/v1/liked/${g}`),l.value.isLiked=!l.value.isLiked,l.value.isLiked?h.success("좋아요 목록에 저장 완료!"):h.info("좋아요 목록에서 삭제 완료!")}catch(g){console.log("handleLike() err:",g),g.status===401&&s.push("/login")}},$=async()=>{try{const g=a.params.id;await H.post(`/api/v1/cart/${g}`),l.value.isInCart=!l.value.isInCart,l.value.isInCart?h.success("장바구니 목록에 저장 완료!"):h.info("장바구니 목록에서 삭제 완료!")}catch(g){console.log("handleLike() err:",g),g.status===401&&s.push("/login")}},V=async()=>{try{console.log("handleBuy");const g=[a.params.id],R=(await H.post("/api/v1/orders",{productIds:g})).data.orderId;s.push(`/orders/${R}`)}catch(g){console.log("handleBuy() err:",g),g.status===401&&s.push("/login")}};return(g,A)=>l.value?(o(),c(x,{key:0},[i(os,{"detail-dto":l.value,onScrollToReview:n,onSave:w,onLike:f,onCart:$,onBuy:V},null,8,["detail-dto"]),i(G,{"detail-dto":l.value},null,8,["detail-dto"]),i(rs,{"detail-dto":l.value},null,8,["detail-dto"]),i(Mt,{"detail-dto":l.value},null,8,["detail-dto"]),i(zt,{"detail-dto":l.value},null,8,["detail-dto"]),i(Us,{ref_key:"reviewSection",ref:r,"detail-dto":l.value},null,8,["detail-dto"]),i(G,{"detail-dto":l.value},null,8,["detail-dto"]),i(de)],64)):(o(),S(ce,{key:1}))}};export{Js as default};
