import{y as S,z as g,s as p,o,c as l,B as x,k as C,m as D,b as t,_ as B,r as _,a as M,j as z,l as A,C as $,F as V,n as L,t as k,d as f,w as P,A as j,D as N,h as H,g as R,p as Z,q as U,e as I}from"./index-Ct8V6wF8.js";import{P as E}from"./Pagination-D4WC6-Wo.js";const F=["width","height","fill","transform"],O={key:0},T=t("path",{d:"M228,144v64a12,12,0,0,1-12,12H40a12,12,0,0,1-12-12V144a12,12,0,0,1,24,0v52H204V144a12,12,0,0,1,24,0Zm-108.49,8.49a12,12,0,0,0,17,0l40-40a12,12,0,0,0-17-17L140,115V32a12,12,0,0,0-24,0v83L96.49,95.51a12,12,0,0,0-17,17Z"},null,-1),q=[T],G={key:1},W=t("path",{d:"M216,48V208H40V48A16,16,0,0,1,56,32H200A16,16,0,0,1,216,48Z",opacity:"0.2"},null,-1),J=t("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"},null,-1),K=[W,J],Q={key:2},X=t("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40A8,8,0,0,0,168,96H136V32a8,8,0,0,0-16,0V96H88a8,8,0,0,0-5.66,13.66Z"},null,-1),Y=[X],ee={key:3},ae=t("path",{d:"M222,144v64a6,6,0,0,1-6,6H40a6,6,0,0,1-6-6V144a6,6,0,0,1,12,0v58H210V144a6,6,0,0,1,12,0Zm-98.24,4.24a6,6,0,0,0,8.48,0l40-40a6,6,0,0,0-8.48-8.48L134,129.51V32a6,6,0,0,0-12,0v97.51L92.24,99.76a6,6,0,0,0-8.48,8.48Z"},null,-1),te=[ae],oe={key:4},le=t("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"},null,-1),re=[le],se={key:5},ne=t("path",{d:"M220,144v64a4,4,0,0,1-4,4H40a4,4,0,0,1-4-4V144a4,4,0,0,1,8,0v60H212V144a4,4,0,0,1,8,0Zm-94.83,2.83a4,4,0,0,0,5.66,0l40-40a4,4,0,1,0-5.66-5.66L132,134.34V32a4,4,0,0,0-8,0V134.34L90.83,101.17a4,4,0,0,0-5.66,5.66Z"},null,-1),ie=[ne],ce={name:"PhDownloadSimple"},de=S({...ce,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(w){const r=w,i=g("weight","regular"),c=g("size","1em"),m=g("color","currentColor"),d=g("mirrored",!1),s=p(()=>r.weight??i),v=p(()=>r.size??c),y=p(()=>r.color??m),h=p(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(n,e)=>(o(),l("svg",D({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:v.value,height:v.value,fill:y.value,transform:h.value},n.$attrs),[x(n.$slots,"default"),s.value==="bold"?(o(),l("g",O,q)):s.value==="duotone"?(o(),l("g",G,K)):s.value==="fill"?(o(),l("g",Q,Y)):s.value==="light"?(o(),l("g",ee,te)):s.value==="regular"?(o(),l("g",oe,re)):s.value==="thin"?(o(),l("g",se,ie)):C("",!0)],16,F))}}),ue={class:"library"},ve={class:"page-controls d-flex justify-content-end"},ge=["value"],pe={key:0,class:"empty-state"},me={key:1,class:"library-grid"},ye=["src","alt"],he={class:"library-item__info"},be={__name:"ProductLibraryPage",setup(w){const r=_({libraryDtos:[],totalPages:0,totalElements:0,currentPage:0}),i=_(0),c=_(10),m=[5,10,20,50],d=M(),s=async(n=0)=>{try{const e=await H.get(`/api/v1/products/library?page=${n}&size=${c.value}`);r.value=e.data,i.value=e.data.currentPage}catch(e){console.log("fetchLibrary() err:",e),d.error("라이브러리 목록을 불러올 수 없습니다.")}},v=n=>{s(n-1)},y=()=>{i.value=0,s(0)},h=async n=>{try{const e=await H.get(`/api/v1/products/files/download/${n}`,{responseType:"arraybuffer"}),b=new Blob([e.data],{type:"application/zip"}),a=window.URL.createObjectURL(b),u=document.createElement("a");u.href=a,u.download="files.zip",document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(a),d.success("다운로드가 시작됩니다.")}catch(e){console.log("handleDownload() err:",e),d.error("다운로드에 실패했습니다.")}};return z(()=>{s()}),(n,e)=>{const b=R("RouterLink");return o(),l("div",ue,[e[3]||(e[3]=t("h1",{class:"mb-4 text-center"},"내 서재",-1)),t("div",ve,[A(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),onChange:y},[(o(),l(V,null,L(m,a=>t("option",{key:a,value:a},k(a)+"개씩 보기 ",9,ge)),64))],544),[[$,c.value]])]),r.value.libraryDtos.length===0?(o(),l("div",pe,e[1]||(e[1]=[t("p",null,"구매한 도서가 없습니다.",-1)]))):(o(),l("div",me,[(o(!0),l(V,null,L(r.value.libraryDtos,a=>(o(),l("div",{key:a.productId,class:"library-item"},[f(b,{to:`/products/${a.productId}`},{default:P(()=>[t("img",{src:Z(U)(a.thumbnailUrl),alt:a.title,class:"library-item__image"},null,8,ye)]),_:2},1032,["to"]),t("div",he,[t("h3",null,k(a.title),1),f(j,{onAction:()=>h(a.productId),class:"download-btn"},{default:P(()=>[f(Z(de)),e[2]||(e[2]=I(" 다운로드 "))]),_:2},1032,["onAction"])])]))),128))])),r.value.totalPages>1?(o(),N(E,{key:2,"current-page":i.value+1,"total-pages":r.value.totalPages,onPageChange:v},null,8,["current-page","total-pages"])):C("",!0)])}}},we=B(be,[["__scopeId","data-v-bdb856d3"]]);export{we as default};
